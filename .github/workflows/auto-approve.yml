# =====================================================
# è‡ªå‹•æ‰¿èª ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
# å®‰å…¨ãªPRã‚¿ã‚¤ãƒ—ï¼ˆchore, deps, docs, ciï¼‰ã®è‡ªå‹•æ‰¿èª
# Dependabot / Renovate PRã‚‚å¯¾å¿œ
# =====================================================

name: è‡ªå‹•æ‰¿èª

on:
  pull_request_target:
    types: [opened, synchronize, reopened]

permissions:
  pull-requests: write

jobs:
  auto-approve:
    runs-on: ubuntu-latest
    # å®‰å…¨ãªPRã‚¿ã‚¤ãƒ—ã®ã¿è‡ªå‹•æ‰¿èª
    # å¿…é ˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ: APPROVE_PAT (repo, write:discussion ã‚¹ã‚³ãƒ¼ãƒ—ã®PAT)
    if: |
      (
        github.actor == 'ryu1aida1126' ||
        github.actor == 'dependabot[bot]' ||
        github.actor == 'renovate[bot]'
      ) &&
      (
        startsWith(github.head_ref, 'chore/') ||
        startsWith(github.head_ref, 'deps/') ||
        startsWith(github.head_ref, 'docs/') ||
        startsWith(github.head_ref, 'fix/sync') ||
        startsWith(github.head_ref, 'ci/') ||
        startsWith(github.head_ref, 'dependabot/') ||
        startsWith(github.head_ref, 'renovate/')
      )
    steps:
      - name: è‡ªå‹•æ‰¿èª
        uses: hmarr/auto-approve-action@v4
        with:
          # PATãŒå¿…è¦ï¼ˆçµ„ç¹”è¨­å®šã§GITHUB_TOKENã«ã‚ˆã‚‹æ‰¿èªãŒç¦æ­¢ã•ã‚Œã¦ã„ã‚‹ãŸã‚ï¼‰
          # Settings â†’ Secrets â†’ APPROVE_PAT ã‚’è¨­å®šã™ã‚‹ã“ã¨
          github-token: ${{ secrets.APPROVE_PAT || secrets.GITHUB_TOKEN }}
          review-message: "ğŸ¤– å®‰å…¨ãªPRã‚¿ã‚¤ãƒ—ã®ãŸã‚è‡ªå‹•æ‰¿èª"
